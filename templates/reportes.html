<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Reportes del Botiqu√≠n</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-dark text-light">
<div class="container mt-5">
    <h1 class="text-center mb-4"> Reportes del Botiqu√≠n Inteligente</h1>
    <a href="/" class="btn btn-secondary mb-4">Volver al Inicio</a>

    <!-- üî• SELECT PARA FILTRAR POR TIPO üî• -->
    <div class="mb-3">
        <label class="form-label">Filtrar por tipo:</label>
        <select id="filtroTipo" class="form-select w-25">
            <option value="todos">Todos</option>
            <option value="pastilla">Pastilla</option>
            <option value="inyeccion">Inyecci√≥n</option>
            <option value="jarabe">Jarabe</option>
            <option value="tableta">Tableta</option>
            <option value="capsula">C√°psula</option>
        </select>
    </div>

    <h2>Proyecciones de Medicamentos</h2>

    <table class="table table-dark table-striped" id="tablaReportes">
        <thead>
            <tr>
                <th>Medicamento</th>
                <th>Tipo</th>
                <th>Restante</th>
                <th>Consumo Diario</th>
                <th>Fecha Estimada de Agotamiento</th>
            </tr>
        </thead>

        <tbody>
        {% for r in datos %}
        <tr>
            <td>{{ r.nombre }}</td>
            <td class="tipo">{{ r.tipo }}</td>
            <td>{{ r.restante }}</td>
            <td>{{ r.consumo_diario }}</td>
            <td>{{ r.fecha_agotamiento }}</td>
        </tr>
        {% endfor %}
        </tbody>
    </table>
</div>

<!-- üî• SCRIPT DE FILTRO -->
<script>
document.getElementById("filtroTipo").addEventListener("change", function() {
    const filtro = this.value.toLowerCase();
    const filas = document.querySelectorAll("#tablaReportes tbody tr");

    filas.forEach(fila => {
        const tipo = fila.querySelector(".tipo").textContent.toLowerCase();

        if (filtro === "todos" || tipo === filtro) {
            fila.style.display = "";
        } else {
            fila.style.display = "none";
        }
    });
});
</script>

</body>
</html>
